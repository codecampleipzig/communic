<form class="register-card card text-center background" [formGroup]="profileForm" (ngSubmit)="onSubmit()">
  <h2>Communic.io</h2>
  <h3 *ngIf="authType == 'register'">Join your community!</h3>
  <h3 *ngIf="authType == 'login'">Meet your community!</h3>

  <div class="avatar" *ngIf="authType == 'register'">
    <div *ngIf="url" class="user-image">
      <img [src]="url" />
    </div>
    <div *ngIf="!url" class="user-image">
      <i class="fas fa-camera"></i>
      <input type="file" id="myFileInput" accept="image/*" (change)="onSelectFile($event)" />
    </div>
  </div>

  <button
    type="button"
    class="button outlined"
    *ngIf="authType == 'register'"
    onclick="document.getElementById('myFileInput').click()"
  >
    Upload Image
  </button>

  <label>
    <input type="text" placeholder="Username" formControlName="username" required *ngIf="authType == 'register'" />
    <span
      class="form-rule"
      *ngIf="(username.dirty || username.touched) && username.invalid && username.errors.required"
    >
      Please choose an username.
    </span>
  </label>

  <label>
    <input type="email" placeholder="Email" formControlName="email" required />
    <span
      class="form-rule"
      *ngIf="(email.dirty || email.touched) && email.invalid && email.errors.required && authType == 'register'"
    >
      We promise not to spam you. Maybe.
    </span>
    <span
      class="form-rule"
      *ngIf="(email.dirty || email.touched) && email.invalid && email.errors.required && authType == 'login'"
    >
      Please use the e-mail you used to register your account.
    </span>
  </label>

  <label>
    <input type="password" placeholder="Password" formControlName="password" required />
    <span class="form-rule" *ngIf="(password.dirty || password.touched) && password.invalid && authType == 'register'">
      Your password should be at least 10 characters long.
    </span>
    <span class="form-rule" *ngIf="(password.dirty || password.touched) && password.invalid && authType == 'login'">
      Forgot your password? Reset it by clicking <a routerLink="">here</a>.
    </span>
    <input
      id="confirm-password"
      [ngClass]="{ 'ng-valid': !profileForm.errors, 'ng-invalid': profileForm.errors }"
      type="password"
      placeholder="Confirm Password"
      formControlName="confirmPassword"
      required
    />
  </label>

  <button type="submit" [disabled]="!profileForm.valid" *ngIf="authType == 'register'" class="button">Join now!</button>
  <button type="submit" [disabled]="!profileForm.valid" *ngIf="authType == 'login'" class="button">Login</button>

  <p *ngIf="authType == 'register'">Already have an account? <a [routerLink]="['/login']">Login here</a></p>
  <p *ngIf="authType == 'login'">Need an account? <a [routerLink]="['/register']">Register here</a></p>
</form>
